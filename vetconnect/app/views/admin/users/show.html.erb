<div class="container mt-4">
  <h1>Detalles del Usuario</h1>

  <div class="card mt-4">
    <div class="card-body">
      <div class="row">
        <div class="col-md-6">
          <h5>Información Personal</h5>
          <p><strong>ID:</strong> <%= @user.id %></p>
          <p><strong>Nombre:</strong> <%= @user.full_name %></p>
          <p><strong>Email:</strong> <%= @user.email %></p>
          <p><strong>Teléfono:</strong> <%= @user.phone %></p>
          <p><strong>Rol:</strong> <span class="badge bg-info"><%= @user.role.humanize %></span></p>
        </div>
        <div class="col-md-6">
          <h5>Estado de la Cuenta</h5>
          <p><strong>Estado:</strong> 
            <% if @user.confirmed? %>
              <span class="badge bg-success">Confirmado</span>
            <% else %>
              <span class="badge bg-warning">Pendiente Confirmación</span>
            <% end %>
          </p>
          <p><strong>Fecha de Registro:</strong> <%= l(@user.created_at, format: :long) %></p>
          <% if @user.confirmed_at %>
            <p><strong>Confirmado:</strong> <%= l(@user.confirmed_at, format: :long) %></p>
          <% end %>
          <p><strong>Último Acceso:</strong> 
            <%= @user.current_sign_in_at ? l(@user.current_sign_in_at, format: :long) : 'Nunca' %>
          </p>
        </div>
      </div>

      <% if @user.owner? %>
        <hr>
        <h5>Mascotas Registradas</h5>
        <p><strong>Total:</strong> <%= @user.pets.count %> mascotas</p>
      <% elsif @user.veterinarian? %>
        <hr>
        <h5>Estadísticas como Veterinario</h5>
        <p><strong>Citas Atendidas:</strong> <%= @user.appointments_as_vet.count %></p>
        <p><strong>Registros Médicos:</strong> <%= @user.medical_records_created.count %></p>
      <% end %>
    </div>
  </div>

  <div class="mt-3">
    <%= link_to 'Editar', edit_admin_user_path(@user), class: 'btn btn-warning' %>
    <%= link_to 'Eliminar', admin_user_path(@user), 
        method: :delete, 
        data: { confirm: '¿Estás seguro?' }, 
        class: 'btn btn-danger' %>
    <%= link_to 'Volver', admin_users_path, class: 'btn btn-secondary' %>
  </div>
</div>
