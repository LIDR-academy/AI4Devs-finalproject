# T9 — Frontend: Login y guardado de API key

| Campo | Valor |
|-------|--------|
| **ID** | T9 |
| **Título** | Frontend: Login y guardado de API key |
| **Historia(s)** | [MH1](../historias-usuario/MH1.md) |
| **Área** | Frontend |

## Descripción

Implementar la pantalla de login donde el usuario introduce su API key (o credenciales), llamar al endpoint de login, guardar la API key en localStorage y redirigir al dashboard. Implementar la lógica para que las peticiones API incluyan el header Authorization y que en 401 se limpie la sesión y se redirija a login.

## Criterios de aceptación

- **AC1**: Existe la ruta `/login` y un componente/página Login con formulario (campo API key o email/password según backend).
- **AC2**: Al enviar el formulario se llama a `POST /api/auth/login`; en éxito se guarda la API key en `localStorage` (ej. clave `flotiko_api_key`) y se redirige a `/` (dashboard).
- **AC3**: Cliente HTTP (axios) configurado con interceptor que añade `Authorization: Bearer {api_key}` leyendo de localStorage; si no hay API key y la ruta no es login, redirigir a `/login`.
- **AC4**: Interceptor de respuesta: si la respuesta es 401, eliminar API key de localStorage, opcionalmente mostrar mensaje "Sesión expirada" y redirigir a `/login`.
- **AC5**: Si el usuario ya tiene API key válida y accede a `/login`, se puede redirigir directamente al dashboard para evitar pantalla de login innecesaria.
- **AC6**: Manejo de errores de login (credenciales inválidas): mostrar mensaje en la pantalla sin redirigir.

## Notas técnicas

- Página: src/pages/Login.jsx en el frontend. Cliente: src/services/api.js (interceptors). Rutas en App.jsx.

---

[Índice de tickets](../tickets.md)
