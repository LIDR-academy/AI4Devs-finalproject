# T11 — Frontend: Detalle vehículo y formulario repostaje

| Campo | Valor |
|-------|--------|
| **ID** | T11 |
| **Título** | Frontend: Detalle vehículo y formulario repostaje |
| **Historia(s)** | [MH2](../historias-usuario/MH2.md), [MH3](../historias-usuario/MH3.md) |
| **Área** | Frontend |

## Descripción

Implementar la vista de detalle del vehículo (`/vehicle/:id`) con datos básicos, último repostaje y alertas, y los botones/enlaces para Añadir repostaje, Añadir mantenimiento, Historial e Informe. Implementar el formulario de Añadir repostaje (`/vehicle/:id/add-fuel`) que envíe POST a `/api/fuel-refills` y redirija o actualice la vista tras éxito.

## Criterios de aceptación

- **AC1**: La ruta `/vehicle/:id` obtiene datos con `GET /api/vehicles/{id}` y muestra: marca, modelo, matrícula, año, km, tipo de combustible.
- **AC2**: Se muestra el último repostaje si existe (fecha, km, litros, coste o resumen).
- **AC3**: Se muestran alertas visibles (próximo mantenimiento, ITV, seguro) si la API las expone o se pueden derivar de los datos.
- **AC4**: Botones/enlaces a: Añadir repostaje, Añadir mantenimiento, Historial, Informe.
- **AC5**: Ruta `/vehicle/:id/add-fuel` con formulario: fecha, km, litros, precio por litro, tipo de combustible (valor por defecto del vehículo), opcional gasolinera y notas.
- **AC6**: Envío del formulario: `POST /api/fuel-refills` con `vehicle_id` y campos del formulario; en éxito toast/mensaje y redirección a detalle o historial; en error mostrar mensajes de validación en el formulario.
- **AC7**: Validación en frontend básica (campos obligatorios, números positivos) para mejor UX.

## Notas técnicas

- Páginas: `VehicleDetail.jsx`, `AddFuelRefill.jsx`. Navegación con `useParams`, `useNavigate`. API: `api.get('/vehicles/' + id)`, `api.post('/fuel-refills', { vehicle_id, ... })`.

---

[Índice de tickets](../tickets.md)
