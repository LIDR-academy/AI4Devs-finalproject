<!DOCTYPE html>
{% load i18n %}
{% get_current_language as LANGUAGE_CODE %}
<html lang="{{ LANGUAGE_CODE }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if form.instance.pk %}{% trans "Editar Juego" %}{% else %}{% trans "Nuevo Juego" %}{% endif %} - Gamy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@400;500;600&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'game-green': '#2D5C50',
                        'game-salmon': '#E78787',
                        'game-beige': '#D8D0B8',
                        'game-dark-salmon': '#D57272'
                    },
                    fontFamily: {
                        'game': ['"Roboto Slab"', 'serif']
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-game-green min-h-screen font-game">
    <!-- Header -->
    <header class="bg-game-salmon p-4">
        <div class="container mx-auto flex items-center justify-between">
            <div class="flex items-center space-x-3">
                <a href="{% url 'catalog:home' %}" class="bg-white bg-opacity-70 px-4 py-2 rounded text-game-green hover:bg-opacity-90 transition">
                    {% trans "Inicio" %}
                </a>
                <a href="{% url 'catalog:game_list' %}" class="bg-white bg-opacity-70 px-4 py-2 rounded text-game-green hover:bg-opacity-90 transition">
                    {% trans "Juegos" %}
                </a>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <div class="max-w-4xl mx-auto">
            <div class="bg-white rounded-lg shadow-xl p-8">
                <h1 class="text-3xl font-bold text-game-green mb-6">
                    {% if form.instance.pk %}
                        ‚úèÔ∏è {% trans "Editar Juego:" %} {{ form.instance.name }}
                    {% else %}
                        ‚ûï {% trans "Nuevo Juego" %}
                    {% endif %}
                </h1>

                <!-- Form Errors -->
                {% if form.non_field_errors %}
                    <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4" role="alert">
                        {{ form.non_field_errors }}
                    </div>
                {% endif %}

                <form method="post" enctype="multipart/form-data">
                    {% csrf_token %}
                    
                    <!-- Basic Information -->
                    <h2 class="text-xl font-semibold text-game-green mb-4 border-b pb-2">üìã {% trans "Informaci√≥n B√°sica" %}</h2>
                    
                    <div class="grid grid-cols-1 gap-6 mb-6">
                        <!-- Name ES -->
                        <div>
                            <label for="{{ form.name_es.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                                üá™üá∏ {{ form.name_es.label }} <span class="text-red-500">*</span>
                            </label>
                            {{ form.name_es }}
                            {% if form.name_es.errors %}
                                <p class="text-red-500 text-xs mt-1">{{ form.name_es.errors.0 }}</p>
                            {% endif %}
                        </div>

                        <!-- Name EN -->
                        <div>
                            <label for="{{ form.name_en.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                                üá¨üáß {{ form.name_en.label }} <span class="text-red-500">*</span>
                            </label>
                            {{ form.name_en }}
                            {% if form.name_en.errors %}
                                <p class="text-red-500 text-xs mt-1">{{ form.name_en.errors.0 }}</p>
                            {% endif %}
                        </div>

                        <!-- Name FR -->
                        <div>
                            <label for="{{ form.name_fr.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                                üá´üá∑ {{ form.name_fr.label }} <span class="text-red-500">*</span>
                            </label>
                            {{ form.name_fr }}
                            {% if form.name_fr.errors %}
                                <p class="text-red-500 text-xs mt-1">{{ form.name_fr.errors.0 }}</p>
                            {% endif %}
                        </div>

                        <!-- Slug -->
                        <div>
                            <label for="{{ form.slug.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                                {{ form.slug.label }}
                            </label>
                            {{ form.slug }}
                            {% if form.slug.errors %}
                                <p class="text-red-500 text-xs mt-1">{{ form.slug.errors.0 }}</p>
                            {% endif %}
                            <p class="text-gray-500 text-xs mt-1">{% trans "Dejar vac√≠o para generar autom√°ticamente" %}</p>
                        </div>
                    </div>

                    <div class="border-t border-gray-200 my-6"></div>

                    <!-- Descriptions -->
                    <h2 class="text-xl font-semibold text-game-green mb-4 border-b pb-2">üìù {% trans "Descripciones" %}</h2>
                    
                    <div class="grid grid-cols-1 gap-6 mb-6">
                        <!-- Description ES -->
                        <div>
                            <label for="{{ form.description_es.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                                üá™üá∏ {{ form.description_es.label }}
                            </label>
                            {{ form.description_es }}
                            {% if form.description_es.errors %}
                                <p class="text-red-500 text-xs mt-1">{{ form.description_es.errors.0 }}</p>
                            {% endif %}
                        </div>

                        <!-- Description EN -->
                        <div>
                            <label for="{{ form.description_en.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                                üá¨üáß {{ form.description_en.label }}
                            </label>
                            {{ form.description_en }}
                            {% if form.description_en.errors %}
                                <p class="text-red-500 text-xs mt-1">{{ form.description_en.errors.0 }}</p>
                            {% endif %}
                        </div>

                        <!-- Description FR -->
                        <div>
                            <label for="{{ form.description_fr.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                                üá´üá∑ {{ form.description_fr.label }}
                            </label>
                            {{ form.description_fr }}
                            {% if form.description_fr.errors %}
                                <p class="text-red-500 text-xs mt-1">{{ form.description_fr.errors.0 }}</p>
                            {% endif %}
                        </div>

                        <!-- Categories -->
                        <div>
                            <label for="{{ form.categories.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                                {{ form.categories.label }} <span class="text-red-500">*</span>
                            </label>
                            <div class="border border-gray-300 rounded-md p-3 max-h-60 overflow-y-auto bg-gray-50">
                                {{ form.categories }}
                            </div>
                            {% if form.categories.errors %}
                                <p class="text-red-500 text-xs mt-1">{{ form.categories.errors.0 }}</p>
                            {% endif %}
                            <p class="text-gray-500 text-xs mt-1">{% trans "Selecciona m√∫ltiples categor√≠as" %}</p>
                        </div>
                    </div>

                    <!-- Game Specifications -->
                    <h2 class="text-xl font-semibold text-game-green mb-4 border-b pb-2 mt-8">üéÆ {% trans "Especificaciones del Juego" %}</h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <!-- Min Players -->
                        <div>
                            <label for="{{ form.min_players.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                                {{ form.min_players.label }}
                            </label>
                            {{ form.min_players }}
                            {% if form.min_players.errors %}
                                <p class="text-red-500 text-xs mt-1">{{ form.min_players.errors.0 }}</p>
                            {% endif %}
                        </div>

                        <!-- Max Players -->
                        <div>
                            <label for="{{ form.max_players.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                                {{ form.max_players.label }}
                            </label>
                            {{ form.max_players }}
                            {% if form.max_players.errors %}
                                <p class="text-red-500 text-xs mt-1">{{ form.max_players.errors.0 }}</p>
                            {% endif %}
                        </div>

                        <!-- Min Playtime -->
                        <div>
                            <label for="{{ form.min_playtime.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                                {{ form.min_playtime.label }}
                            </label>
                            {{ form.min_playtime }}
                            {% if form.min_playtime.errors %}
                                <p class="text-red-500 text-xs mt-1">{{ form.min_playtime.errors.0 }}</p>
                            {% endif %}
                            <p class="text-gray-500 text-xs mt-1">{% trans "En minutos" %}</p>
                        </div>

                        <!-- Max Playtime -->
                        <div>
                            <label for="{{ form.max_playtime.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                                {{ form.max_playtime.label }}
                            </label>
                            {{ form.max_playtime }}
                            {% if form.max_playtime.errors %}
                                <p class="text-red-500 text-xs mt-1">{{ form.max_playtime.errors.0 }}</p>
                            {% endif %}
                            <p class="text-gray-500 text-xs mt-1">{% trans "En minutos" %}</p>
                        </div>

                        <!-- Min Age -->
                        <div>
                            <label for="{{ form.min_age.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                                {{ form.min_age.label }}
                            </label>
                            {{ form.min_age }}
                            {% if form.min_age.errors %}
                                <p class="text-red-500 text-xs mt-1">{{ form.min_age.errors.0 }}</p>
                            {% endif %}
                        </div>

                        <!-- Difficulty -->
                        <div>
                            <label for="{{ form.difficulty.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                                {{ form.difficulty.label }}
                            </label>
                            {{ form.difficulty }}
                            {% if form.difficulty.errors %}
                                <p class="text-red-500 text-xs mt-1">{{ form.difficulty.errors.0 }}</p>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Publishing Information -->
                    <h2 class="text-xl font-semibold text-game-green mb-4 border-b pb-2 mt-8">üìö {% trans "Informaci√≥n de Publicaci√≥n" %}</h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <!-- Publisher -->
                        <div>
                            <label for="{{ form.publisher.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                                {{ form.publisher.label }}
                            </label>
                            {{ form.publisher }}
                            {% if form.publisher.errors %}
                                <p class="text-red-500 text-xs mt-1">{{ form.publisher.errors.0 }}</p>
                            {% endif %}
                        </div>

                        <!-- Year Published -->
                        <div>
                            <label for="{{ form.year_published.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                                {{ form.year_published.label }}
                            </label>
                            {{ form.year_published }}
                            {% if form.year_published.errors %}
                                <p class="text-red-500 text-xs mt-1">{{ form.year_published.errors.0 }}</p>
                            {% endif %}
                        </div>

                        <!-- Rules URL -->
                        <div class="md:col-span-2">
                            <label for="{{ form.rules_url.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                                {{ form.rules_url.label }}
                            </label>
                            {{ form.rules_url }}
                            {% if form.rules_url.errors %}
                                <p class="text-red-500 text-xs mt-1">{{ form.rules_url.errors.0 }}</p>
                            {% endif %}
                            <p class="text-gray-500 text-xs mt-1">{% trans "URL completa del PDF de reglas" %}</p>
                        </div>
                    </div>

                    <!-- Image -->
                    <h2 class="text-xl font-semibold text-game-green mb-4 border-b pb-2 mt-8">üñºÔ∏è {% trans "Imagen" %}</h2>
                    
                    <div class="mb-6">
                        {% if form.instance.image %}
                        <div class="mb-4">
                            <img src="{{ form.instance.image.url }}" alt="{{ form.instance.name }}" class="max-w-xs rounded-lg shadow-md">
                            <p class="text-sm text-gray-600 mt-2">{% trans "Imagen actual" %}</p>
                        </div>
                        {% endif %}
                        <label for="{{ form.image.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                            {{ form.image.label }}
                        </label>
                        {{ form.image }}
                        {% if form.image.errors %}
                            <p class="text-red-500 text-xs mt-1">{{ form.image.errors.0 }}</p>
                        {% endif %}
                    </div>

                    <div class="border-t border-gray-200 my-6"></div>

                    <!-- Action Buttons -->
                    <div class="flex justify-between items-center">
                        <a href="{% url 'catalog:game_list' %}" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-medium py-2 px-6 rounded-lg transition">
                            ‚ùå {% trans "Cancelar" %}
                        </a>
                        <button type="submit" class="bg-game-salmon hover:bg-game-dark-salmon text-white font-medium py-2 px-6 rounded-lg transition">
                            üíæ {% if form.instance.pk %}{% trans "Actualizar" %}{% else %}{% trans "Crear" %}{% endif %}
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </main>
</body>
</html>
