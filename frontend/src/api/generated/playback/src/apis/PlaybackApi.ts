/* tslint:disable */
/* eslint-disable */
/**
 * Meditation Builder - Playback API
 * API for listing and playing generated meditation content.  Bounded Context: **Playback** (separate from Composition/US2 and Generation/US3)  Core capabilities: - List User Meditations: Retrieve all meditations for the authenticated user with current processing states - Play Completed Meditation: Access multimedia content for playback (only COMPLETED meditations)  Architecture: Hexagonal (Ports & Adapters) BDD-First, API-First approach  MVP Infrastructure: - Persistence: PostgreSQL (schema: generation, table: meditations) - READ-ONLY from US3 - Storage: Media URLs point to S3 (managed by Generation BC/US3)  Business Rules: - Users can only see their own meditations (userId isolation enforced) - Only meditations with state COMPLETED can be played - State labels visible to users: \"En cola\", \"Generando\", \"Completada\", \"Fallida\"  Authentication: JWT (blocked by US1 - bypass in tests via TestSecurityConfig) 
 *
 * The version of the OpenAPI document: 1.0.0
 * 
 *
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */


import * as runtime from '../runtime';
import type {
  ErrorResponse,
  MeditationListResponse,
  PlaybackInfoResponse,
} from '../models/index';
import {
    ErrorResponseFromJSON,
    ErrorResponseToJSON,
    MeditationListResponseFromJSON,
    MeditationListResponseToJSON,
    PlaybackInfoResponseFromJSON,
    PlaybackInfoResponseToJSON,
} from '../models/index';

export interface GetPlaybackInfoRequest {
    meditationId: string;
}

/**
 * 
 */
export class PlaybackApi extends runtime.BaseAPI {

    /**
     * Retrieve detailed playback information for a specific meditation.  Returns: - Meditation details (id, title, state, creation date) - Media URLs for playback (audio, video, subtitles)  Validation: - Meditation must exist and belong to the authenticated user (404 if not) - Meditation must be in COMPLETED state (409 if not playable)  Use Cases: - User clicks \"Play\" button on a completed meditation - Frontend needs media URLs to initialize player  Maps to BDD Scenario 2: \"Reproducir una meditación completada\" 
     * Get playback information for a meditation
     */
    async getPlaybackInfoRaw(requestParameters: GetPlaybackInfoRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<PlaybackInfoResponse>> {
        if (requestParameters['meditationId'] == null) {
            throw new runtime.RequiredError(
                'meditationId',
                'Required parameter "meditationId" was null or undefined when calling getPlaybackInfo().'
            );
        }

        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        if (this.configuration && this.configuration.accessToken) {
            const token = this.configuration.accessToken;
            const tokenString = await token("bearerAuth", []);

            if (tokenString) {
                headerParameters["Authorization"] = `Bearer ${tokenString}`;
            }
        }

        let urlPath = `/playback/meditations/{meditationId}`;
        urlPath = urlPath.replace(`{${"meditationId"}}`, encodeURIComponent(String(requestParameters['meditationId'])));

        const response = await this.request({
            path: urlPath,
            method: 'GET',
            headers: headerParameters,
            query: queryParameters,
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => PlaybackInfoResponseFromJSON(jsonValue));
    }

    /**
     * Retrieve detailed playback information for a specific meditation.  Returns: - Meditation details (id, title, state, creation date) - Media URLs for playback (audio, video, subtitles)  Validation: - Meditation must exist and belong to the authenticated user (404 if not) - Meditation must be in COMPLETED state (409 if not playable)  Use Cases: - User clicks \"Play\" button on a completed meditation - Frontend needs media URLs to initialize player  Maps to BDD Scenario 2: \"Reproducir una meditación completada\" 
     * Get playback information for a meditation
     */
    async getPlaybackInfo(requestParameters: GetPlaybackInfoRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<PlaybackInfoResponse> {
        const response = await this.getPlaybackInfoRaw(requestParameters, initOverrides);
        return await response.value();
    }

    /**
     * Retrieve all meditations created by the authenticated user.  Returns: - All meditations regardless of state (PENDING, PROCESSING, COMPLETED, FAILED) - Ordered by creation date (most recent first) - Includes current processing state for each meditation - Includes media URLs (for COMPLETED meditations)  State Labels: - PENDING → \"En cola\" - PROCESSING → \"Generando\" - COMPLETED → \"Completada\" - FAILED → \"Fallida\"  Business Rules: - Only meditations belonging to the authenticated user are returned - No pagination in v1 (all meditations returned) - Empty list if user has no meditations  Maps to BDD Scenario 1: \"Listar las meditaciones del usuario con su estado\" 
     * List user meditations with processing states
     */
    async listUserMeditationsRaw(initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<MeditationListResponse>> {
        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        if (this.configuration && this.configuration.accessToken) {
            const token = this.configuration.accessToken;
            const tokenString = await token("bearerAuth", []);

            if (tokenString) {
                headerParameters["Authorization"] = `Bearer ${tokenString}`;
            }
        }

        let urlPath = `/playback/meditations`;

        const response = await this.request({
            path: urlPath,
            method: 'GET',
            headers: headerParameters,
            query: queryParameters,
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => MeditationListResponseFromJSON(jsonValue));
    }

    /**
     * Retrieve all meditations created by the authenticated user.  Returns: - All meditations regardless of state (PENDING, PROCESSING, COMPLETED, FAILED) - Ordered by creation date (most recent first) - Includes current processing state for each meditation - Includes media URLs (for COMPLETED meditations)  State Labels: - PENDING → \"En cola\" - PROCESSING → \"Generando\" - COMPLETED → \"Completada\" - FAILED → \"Fallida\"  Business Rules: - Only meditations belonging to the authenticated user are returned - No pagination in v1 (all meditations returned) - Empty list if user has no meditations  Maps to BDD Scenario 1: \"Listar las meditaciones del usuario con su estado\" 
     * List user meditations with processing states
     */
    async listUserMeditations(initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<MeditationListResponse> {
        const response = await this.listUserMeditationsRaw(initOverrides);
        return await response.value();
    }

}
