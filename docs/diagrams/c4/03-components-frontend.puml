@startuml 03-components-frontend
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml

LAYOUT_WITH_LEGEND()

' Generated by C4 Diagram Generator on 2026-01-15
' Agent: C4 Diagram Generator
' System: TravelSplit v1.0.0
' Architecture Pattern: Atomic Design

title TravelSplit Frontend - Component Diagram

' Pages (Top Level Components)
Component(home_page, "HomePage", "React Page", "Pagina principal con resumen de viajes y accesos rapidos")
Component(login_page, "LoginPage", "React Page", "Pagina de inicio de sesion")
Component(register_page, "RegisterPage", "React Page", "Pagina de registro de nuevos usuarios")
Component(trips_list_page, "TripsListPage", "React Page", "Lista de viajes del usuario (activos e historicos)")
Component(trip_detail_page, "TripDetailPage", "React Page", "Detalle de viaje con gastos, participantes y saldos")
Component(create_trip_page, "CreateTripPage", "React Page", "Formulario para crear nuevo viaje")
Component(expense_form_page, "ExpenseFormPage", "React Page", "Formulario para crear/editar gastos")

' Organisms
Component(header, "Header", "React Organism", "Barra de navegacion superior con logo y menu")
Component(bottom_tab_bar, "BottomTabBar", "React Organism", "Navegacion inferior para moviles")
Component(join_trip_modal, "JoinTripModal", "React Organism", "Modal para unirse a viaje con codigo")

' Molecules
Component(trip_card, "TripCard", "React Molecule", "Tarjeta de viaje con info resumida")
Component(balance_card, "BalanceCard", "React Molecule", "Tarjeta de saldo con deuda/acreedor")
Component(expense_form, "ExpenseForm", "React Molecule", "Formulario de gasto con validacion Zod")
Component(form_field, "FormField", "React Molecule", "Campo de formulario con label y error")
Component(payer_selector, "PayerSelector", "React Molecule", "Selector de quien pago el gasto")
Component(beneficiaries_selector, "BeneficiariesSelector", "React Molecule", "Selector de beneficiarios del gasto")
Component(category_selector, "CategorySelector", "React Molecule", "Selector de categoria del gasto")
Component(protected_route, "ProtectedRoute", "React Molecule", "HOC que protege rutas autenticadas")
Component(join_trip_button, "JoinTripButton", "React Molecule", "Boton para abrir modal de unirse a viaje")

' Atoms
Component(button, "Button", "React Atom", "Boton reutilizable con variantes")
Component(input, "Input", "React Atom", "Input de texto reutilizable")
Component(amount_input, "AmountInput", "React Atom", "Input especializado para montos en COP")
Component(category_pill, "CategoryPill", "React Atom", "Etiqueta de categoria con color")
Component(image_upload, "ImageUpload", "React Atom", "Componente para subir imagenes de recibos")
Component(skeleton, "Skeleton", "React Atom", "Placeholder de carga")
Component(toast, "Toast", "React Atom", "Notificacion toast")

' Hooks (State Management)
Component(use_auth, "useAuth", "React Hook", "Hook de autenticacion con TanStack Query")
Component(use_trip_detail, "useTripDetail", "React Hook", "Hook para detalle de viaje")
Component(use_expense_form, "useExpenseForm", "React Hook", "Hook para formulario de gastos")

' Services
Component(auth_service, "authService", "Service", "Servicio de autenticacion: login, register, logout")
Component(trips_service, "tripsService", "Service", "Servicio de viajes: CRUD, participantes")
Component(api_client, "apiClient", "Service", "Cliente HTTP base con interceptors JWT")

' Contexts
Component(auth_context, "AuthContext", "React Context", "Contexto global de autenticacion")

' External Container (Backend API)
Container(backend_api, "Backend API", "NestJS", "API REST del sistema")

' Page -> Organism Relationships
Rel(home_page, header, "Usa")
Rel(home_page, bottom_tab_bar, "Usa")
Rel(trips_list_page, header, "Usa")
Rel(trips_list_page, bottom_tab_bar, "Usa")
Rel(trip_detail_page, header, "Usa")
Rel(trip_detail_page, join_trip_modal, "Usa")

' Page -> Molecule Relationships
Rel(trips_list_page, trip_card, "Usa")
Rel(trip_detail_page, balance_card, "Usa")
Rel(expense_form_page, expense_form, "Usa")
Rel(create_trip_page, form_field, "Usa")
Rel(home_page, join_trip_button, "Usa")

' Molecule -> Atom Relationships
Rel(expense_form, amount_input, "Usa")
Rel(expense_form, category_selector, "Usa")
Rel(expense_form, payer_selector, "Usa")
Rel(expense_form, beneficiaries_selector, "Usa")
Rel(expense_form, image_upload, "Usa")
Rel(form_field, input, "Usa")
Rel(trip_card, category_pill, "Usa")

' Page -> Hook Relationships
Rel(login_page, use_auth, "Usa")
Rel(register_page, use_auth, "Usa")
Rel(trip_detail_page, use_trip_detail, "Usa")
Rel(expense_form_page, use_expense_form, "Usa")

' Hook -> Service Relationships
Rel(use_auth, auth_service, "Usa")
Rel(use_trip_detail, trips_service, "Usa")
Rel(use_expense_form, trips_service, "Usa")

' Service -> API Relationships
Rel(auth_service, api_client, "Usa")
Rel(trips_service, api_client, "Usa")
Rel(api_client, backend_api, "Realiza peticiones", "HTTPS/REST")

' Context Relationships
Rel(protected_route, auth_context, "Usa")
Rel(use_auth, auth_context, "Usa")

@enduml
