@startuml 02-containers
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml

LAYOUT_WITH_LEGEND()

' Generated by C4 Diagram Generator on 2026-01-15
' Agent: C4 Diagram Generator
' System: TravelSplit v1.0.0

title TravelSplit - Container Diagram

' Users (from discovery.diagram_strategy.context.users)
Person(creator, "Viajero Administrador", "Usuario que crea viajes y gestiona gastos")
Person(participant, "Viajero Participante", "Usuario invitado a viajes")

' System Boundary
System_Boundary(travelsplit, "TravelSplit") {
    ' Frontend Container (from discovery.stack.frontend)
    Container(frontend, "Frontend Web Application", "React v19, Vite v7, Tailwind CSS v4", "SPA que proporciona la interfaz de usuario para gestionar viajes y gastos")
    
    ' Backend Container (from discovery.stack.backend)
    Container(backend, "Backend API", "NestJS v11, TypeScript, Express", "API REST que proporciona autenticacion, gestion de viajes, gastos y calculo de saldos")
    
    ' Database Container (from discovery.stack.backend.database)
    ContainerDb(database, "PostgreSQL Database", "PostgreSQL", "Almacena usuarios, viajes, participantes, gastos y relaciones")
    
    ' File Storage Container
    Container(filestorage, "File Storage", "File System Local (MVP) / S3 Compatible (Prod)", "Almacena fotos de recibos de gastos")
}

' External Systems (from discovery.infrastructure.external_services)
System_Ext(email_service, "Email Service", "Servicio de notificaciones por email")

' User -> Container Relationships
Rel(creator, frontend, "Usa", "HTTPS")
Rel(participant, frontend, "Usa", "HTTPS")

' Container -> Container Relationships
Rel(frontend, backend, "Realiza peticiones API", "HTTPS/REST")
Rel(backend, database, "Lee y escribe datos", "SQL/TypeORM")
Rel(backend, filestorage, "Almacena y recupera imagenes", "File System API / S3 API")
Rel(backend, email_service, "Envia notificaciones", "SMTP/API")

@enduml
